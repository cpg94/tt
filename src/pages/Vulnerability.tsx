import { Text } from '@chakra-ui/react';
import { useParams } from 'react-router-dom'
import DetailsCard from '../components/DetailsCard';
import LabelValue from '../components/LabelValue';
import LoaderContainer from '../components/LoaderContainer';
import SeverityBadge from '../components/SeverityBadge';
import useVulnerability from '../utils/useVulnerability';


const Vulnerability = () => {
  const { id } = useParams();
  const { vulnerability, loading } = useVulnerability(id);

  return (
    <LoaderContainer loading={loading} heading={vulnerability?.name}>
      {vulnerability && (
        <>
          <DetailsCard heading='Basic Details'>
            <>
              <LabelValue label="UUID" value={vulnerability.uuid} />
              <LabelValue label="Severity" value={vulnerability.category} />
              <LabelValue label="CVSS Score" value={vulnerability.cvss_score} />
              <LabelValue label="CVSS3 Score" value={vulnerability.cvss3_score} />
              <LabelValue label="Category" component={<SeverityBadge severity={vulnerability.severity} />} />
            </>
          </DetailsCard>

          <DetailsCard heading='Description'>
            <Text>
              {vulnerability.description}
            </Text>
          </DetailsCard>

          <DetailsCard heading='Remediation'>
            <Text>
              {vulnerability.remediation}
            </Text>
          </DetailsCard>
        </>
      )}

    </LoaderContainer>
  )
}

export default Vulnerability
